import{g as H,a as Y,r as l,u as ne,_ as q,b as Qe,f as He,c as S,j as e,s as O,d as K,e as Z,h as Se,i as Ie,k as Ye,l as N,S as Ke,m as Ze,n as Je,o as Xe,p as et,q as tt,B as at,t as W,v as J,w as X,D as V,x as G,y as L,z as m,F as te,A as z,T as A,C as ke,I as $e,E as we,M as Me,G as oe,H as v,J as Q,P as ze,L as Be,R as _e,K as Pe,N as Fe,O as st,Q as nt,U as ot,V as rt,W as ae,X as it,Y as lt,Z as ct,$ as fe,a0 as ge,a1 as P,a2 as dt,a3 as T,a4 as ut,a5 as pt,a6 as xt,a7 as ve,a8 as ht,a9 as mt}from"./index-a-Y6OfUi.js";function ft(a){return H("MuiFormGroup",a)}Y("MuiFormGroup",["root","row","error"]);const gt=["className","row"],vt=a=>{const{classes:s,row:t,error:o}=a;return Z({root:["root",t&&"row",o&&"error"]},ft,s)},yt=O("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(a,s)=>{const{ownerState:t}=a;return[s.root,t.row&&s.row]}})(({ownerState:a})=>S({display:"flex",flexDirection:"column",flexWrap:"wrap"},a.row&&{flexDirection:"row"})),jt=l.forwardRef(function(s,t){const o=ne({props:s,name:"MuiFormGroup"}),{className:r,row:c=!1}=o,p=q(o,gt),y=Qe(),x=He({props:o,muiFormControl:y,states:["error"]}),I=S({},o,{row:c,error:x.error}),d=vt(I);return e.jsx(yt,S({className:K(d.root,r),ownerState:I,ref:t},p))}),Ct=Se(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked"),bt=Se(e.jsx("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}),"RadioButtonChecked"),Rt=O("span",{shouldForwardProp:Ie})({position:"relative",display:"flex"}),St=O(Ct)({transform:"scale(1)"}),It=O(bt)(({theme:a,ownerState:s})=>S({left:0,position:"absolute",transform:"scale(0)",transition:a.transitions.create("transform",{easing:a.transitions.easing.easeIn,duration:a.transitions.duration.shortest})},s.checked&&{transform:"scale(1)",transition:a.transitions.create("transform",{easing:a.transitions.easing.easeOut,duration:a.transitions.duration.shortest})}));function De(a){const{checked:s=!1,classes:t={},fontSize:o}=a,r=S({},a,{checked:s});return e.jsxs(Rt,{className:t.root,ownerState:r,children:[e.jsx(St,{fontSize:o,className:t.background,ownerState:r}),e.jsx(It,{fontSize:o,className:t.dot,ownerState:r})]})}const Te=l.createContext(void 0);function kt(){return l.useContext(Te)}function $t(a){return H("MuiRadio",a)}const ye=Y("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary","sizeSmall"]),wt=["checked","checkedIcon","color","icon","name","onChange","size","className"],Mt=a=>{const{classes:s,color:t,size:o}=a,r={root:["root",`color${N(t)}`,o!=="medium"&&`size${N(o)}`]};return S({},s,Z(r,$t,s))},zt=O(Ke,{shouldForwardProp:a=>Ie(a)||a==="classes",name:"MuiRadio",slot:"Root",overridesResolver:(a,s)=>{const{ownerState:t}=a;return[s.root,t.size!=="medium"&&s[`size${N(t.size)}`],s[`color${N(t.color)}`]]}})(({theme:a,ownerState:s})=>S({color:(a.vars||a).palette.text.secondary},!s.disableRipple&&{"&:hover":{backgroundColor:a.vars?`rgba(${s.color==="default"?a.vars.palette.action.activeChannel:a.vars.palette[s.color].mainChannel} / ${a.vars.palette.action.hoverOpacity})`:Ze(s.color==="default"?a.palette.action.active:a.palette[s.color].main,a.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},s.color!=="default"&&{[`&.${ye.checked}`]:{color:(a.vars||a).palette[s.color].main}},{[`&.${ye.disabled}`]:{color:(a.vars||a).palette.action.disabled}}));function Bt(a,s){return typeof s=="object"&&s!==null?a===s:String(a)===String(s)}const je=e.jsx(De,{checked:!0}),Ce=e.jsx(De,{}),se=l.forwardRef(function(s,t){var o,r;const c=ne({props:s,name:"MuiRadio"}),{checked:p,checkedIcon:y=je,color:x="primary",icon:I=Ce,name:d,onChange:f,size:u="medium",className:k}=c,b=q(c,wt),j=S({},c,{color:x,size:u}),h=Mt(j),R=kt();let n=p;const M=Ye(f,R&&R.onChange);let $=d;return R&&(typeof n>"u"&&(n=Bt(R.value,c.value)),typeof $>"u"&&($=R.name)),e.jsx(zt,S({type:"radio",icon:l.cloneElement(I,{fontSize:(o=Ce.props.fontSize)!=null?o:u}),checkedIcon:l.cloneElement(y,{fontSize:(r=je.props.fontSize)!=null?r:u}),ownerState:j,classes:h,name:$,checked:n,onChange:M,ref:t,className:K(h.root,k)},b))});function _t(a){return H("MuiRadioGroup",a)}Y("MuiRadioGroup",["root","row","error"]);const Pt=["actions","children","className","defaultValue","name","onChange","value"],Ft=a=>{const{classes:s,row:t,error:o}=a;return Z({root:["root",t&&"row",o&&"error"]},_t,s)},Dt=l.forwardRef(function(s,t){const{actions:o,children:r,className:c,defaultValue:p,name:y,onChange:x,value:I}=s,d=q(s,Pt),f=l.useRef(null),u=Ft(s),[k,b]=Je({controlled:I,default:p,name:"RadioGroup"});l.useImperativeHandle(o,()=>({focus:()=>{let n=f.current.querySelector("input:not(:disabled):checked");n||(n=f.current.querySelector("input:not(:disabled)")),n&&n.focus()}}),[]);const j=Xe(t,f),h=et(y),R=l.useMemo(()=>({name:h,onChange(n){b(n.target.value),x&&x(n,n.target.value)},value:k}),[h,x,b,k]);return e.jsx(Te.Provider,{value:R,children:e.jsx(jt,S({role:"radiogroup",ref:j,className:K(u.root,c)},d,{children:r}))})});function Tt(a){return H("MuiToggleButton",a)}const be=Y("MuiToggleButton",["root","disabled","selected","standard","primary","secondary","sizeSmall","sizeMedium","sizeLarge","fullWidth"]),Nt=l.createContext({}),Ot=l.createContext(void 0);function Ut(a,s){return s===void 0||a===void 0?!1:Array.isArray(s)?s.indexOf(a)>=0:a===s}const qt=["value"],Et=["children","className","color","disabled","disableFocusRipple","fullWidth","onChange","onClick","selected","size","value"],Wt=a=>{const{classes:s,fullWidth:t,selected:o,disabled:r,size:c,color:p}=a,y={root:["root",o&&"selected",r&&"disabled",t&&"fullWidth",`size${N(c)}`,p]};return Z(y,Tt,s)},Vt=O(at,{name:"MuiToggleButton",slot:"Root",overridesResolver:(a,s)=>{const{ownerState:t}=a;return[s.root,s[`size${N(t.size)}`]]}})(({theme:a,ownerState:s})=>{let t=s.color==="standard"?a.palette.text.primary:a.palette[s.color].main,o;return a.vars&&(t=s.color==="standard"?a.vars.palette.text.primary:a.vars.palette[s.color].main,o=s.color==="standard"?a.vars.palette.text.primaryChannel:a.vars.palette[s.color].mainChannel),S({},a.typography.button,{borderRadius:(a.vars||a).shape.borderRadius,padding:11,border:`1px solid ${(a.vars||a).palette.divider}`,color:(a.vars||a).palette.action.active},s.fullWidth&&{width:"100%"},{[`&.${be.disabled}`]:{color:(a.vars||a).palette.action.disabled,border:`1px solid ${(a.vars||a).palette.action.disabledBackground}`},"&:hover":{textDecoration:"none",backgroundColor:a.vars?`rgba(${a.vars.palette.text.primaryChannel} / ${a.vars.palette.action.hoverOpacity})`:W(a.palette.text.primary,a.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${be.selected}`]:{color:t,backgroundColor:a.vars?`rgba(${o} / ${a.vars.palette.action.selectedOpacity})`:W(t,a.palette.action.selectedOpacity),"&:hover":{backgroundColor:a.vars?`rgba(${o} / calc(${a.vars.palette.action.selectedOpacity} + ${a.vars.palette.action.hoverOpacity}))`:W(t,a.palette.action.selectedOpacity+a.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:a.vars?`rgba(${o} / ${a.vars.palette.action.selectedOpacity})`:W(t,a.palette.action.selectedOpacity)}}}},s.size==="small"&&{padding:7,fontSize:a.typography.pxToRem(13)},s.size==="large"&&{padding:15,fontSize:a.typography.pxToRem(15)})}),Gt=l.forwardRef(function(s,t){const o=l.useContext(Nt),{value:r}=o,c=q(o,qt),p=l.useContext(Ot),y=tt(S({},c,{selected:Ut(s.value,r)}),s),x=ne({props:y,name:"MuiToggleButton"}),{children:I,className:d,color:f="standard",disabled:u=!1,disableFocusRipple:k=!1,fullWidth:b=!1,onChange:j,onClick:h,selected:R,size:n="medium",value:M}=x,$=q(x,Et),F=S({},x,{color:f,disabled:u,disableFocusRipple:k,fullWidth:b,size:n}),U=Wt(F),ee=B=>{h&&(h(B,M),B.defaultPrevented)||j&&j(B,M)},D=p||"";return e.jsx(Vt,S({className:K(c.className,U.root,d,D),disabled:u,focusRipple:!k,ref:t,onClick:ee,onChange:j,value:M,ownerState:F,"aria-pressed":R},$,{children:I}))});var re={},Lt=J;Object.defineProperty(re,"__esModule",{value:!0});var Ne=re.default=void 0,At=Lt(X()),Qt=e;Ne=re.default=(0,At.default)((0,Qt.jsx)("path",{d:"M14 11V8c4.56-.58 8-3.1 8-6H2c0 2.9 3.44 5.42 8 6v3c-3.68.73-8 3.61-8 11h6v-2H4.13c.93-6.83 6.65-7.2 7.87-7.2s6.94.37 7.87 7.2H16v2h6c0-7.39-4.32-10.27-8-11m-2 11c-1.1 0-2-.9-2-2 0-.55.22-1.05.59-1.41C11.39 17.79 16 16 16 16s-1.79 4.61-2.59 5.41c-.36.37-.86.59-1.41.59"}),"Scale");var ie={},Ht=J;Object.defineProperty(ie,"__esModule",{value:!0});var Oe=ie.default=void 0,Yt=Ht(X()),Kt=e;Oe=ie.default=(0,Yt.default)((0,Kt.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z"}),"Save");var le={},Zt=J;Object.defineProperty(le,"__esModule",{value:!0});var Ue=le.default=void 0,Jt=Zt(X()),Xt=e;Ue=le.default=(0,Jt.default)((0,Xt.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");var ce={},ea=J;Object.defineProperty(ce,"__esModule",{value:!0});var qe=ce.default=void 0,ta=ea(X()),aa=e;qe=ce.default=(0,ta.default)((0,aa.jsx)("path",{d:"M19 5v14H5V5zm1.1-2H3.9c-.5 0-.9.4-.9.9v16.2c0 .4.4.9.9.9h16.2c.4 0 .9-.5.9-.9V3.9c0-.5-.5-.9-.9-.9M11 7h6v2h-6zm0 4h6v2h-6zm0 4h6v2h-6zM7 7h2v2H7zm0 4h2v2H7zm0 4h2v2H7z"}),"ListAlt");const sa=[2,3,4],na=[2,3,4],oa=({open:a,onClose:s,onScale:t,ingredients:o})=>{var R;const[r,c]=l.useState("multiply"),[p,y]=l.useState(2),[x,I]=l.useState(2),[d,f]=l.useState(""),[u,k]=l.useState(""),[b,j]=l.useState(""),h=()=>{var M;let n;switch(r){case"multiply":n=d?parseFloat(d):p;break;case"divide":n=d?1/parseFloat(d):1/x;break;case"constraint":if(!u||!b)return;const $=o.find(F=>F.id===u);if(!$)return;n=parseFloat(b)/$.quantity;break;default:return}t({type:r,value:n,constraintIngredientId:r==="constraint"?Number(u):void 0,constraintQuantity:r==="constraint"?parseFloat(b):void 0,constraintUnitId:r==="constraint"&&u?(M=o.find($=>$.id===u))==null?void 0:M.unit.id:void 0}),s()};return e.jsxs(V,{open:a,onClose:s,maxWidth:"sm",fullWidth:!0,children:[e.jsx(G,{children:"Scale Recipe"}),e.jsx(L,{children:e.jsxs(m,{sx:{pt:1},children:[e.jsxs(Dt,{value:r,onChange:n=>{c(n.target.value),f("")},children:[e.jsx(te,{value:"multiply",control:e.jsx(se,{}),label:"Multiply Recipe"}),r==="multiply"&&e.jsxs(m,{sx:{pl:4,mb:2},children:[e.jsx(m,{sx:{display:"flex",gap:1,mb:1},children:sa.map(n=>e.jsxs(z,{variant:p===n&&!d?"contained":"outlined",onClick:()=>{y(n),f("")},size:"small",children:[n,"x"]},n))}),e.jsx(A,{label:"Custom multiplier",type:"number",value:d,onChange:n=>f(n.target.value),size:"small",inputProps:{min:"0",step:"0.25"}})]}),e.jsx(te,{value:"divide",control:e.jsx(se,{}),label:"Divide Recipe"}),r==="divide"&&e.jsxs(m,{sx:{pl:4,mb:2},children:[e.jsx(m,{sx:{display:"flex",gap:1,mb:1},children:na.map(n=>e.jsxs(z,{variant:x===n&&!d?"contained":"outlined",onClick:()=>{I(n),f("")},size:"small",children:["1/",n]},n))}),e.jsx(A,{label:"Custom divider",type:"number",value:d,onChange:n=>f(n.target.value),size:"small",inputProps:{min:"0",step:"0.25"}})]}),e.jsx(te,{value:"constraint",control:e.jsx(se,{}),label:"Scale Based on Ingredient"}),r==="constraint"&&e.jsxs(m,{sx:{pl:4,mb:2},children:[e.jsxs(ke,{fullWidth:!0,size:"small",sx:{mb:1},children:[e.jsx($e,{children:"Base Ingredient"}),e.jsx(we,{value:u,onChange:n=>k(n.target.value),label:"Base Ingredient",children:o.map(n=>e.jsxs(Me,{value:n.id,children:[n.name," (",n.quantity," ",n.unit.name,")"]},n.id))})]}),u&&e.jsx(A,{label:"Desired Quantity",type:"number",value:b,onChange:n=>j(n.target.value),size:"small",fullWidth:!0,InputProps:{endAdornment:(R=o.find(n=>n.id===u))==null?void 0:R.unit.name},inputProps:{min:"0",step:"0.25"}})]})]}),e.jsx(oe,{sx:{my:2}}),e.jsx(v,{variant:"body2",color:"text.secondary",children:"Note: The scaling engine will intelligently round certain ingredients (like eggs) to maintain practical measurements while preserving the recipe's proportions."})]})}),e.jsxs(Q,{children:[e.jsx(z,{onClick:s,children:"Cancel"}),e.jsx(z,{onClick:h,variant:"contained",disabled:r==="constraint"&&(!u||!b)||r!=="constraint"&&!d&&!p&&!x,children:"Scale Recipe"})]})]})},Re=({name:a,ingredients:s,yieldQuantity:t,yieldUnit:o,isScaled:r,scaleFactor:c})=>e.jsxs(ze,{sx:{p:2,height:"100%"},children:[e.jsxs(m,{sx:{display:"flex",justifyContent:"space-between",alignItems:"baseline",mb:2,borderBottom:"2px solid",borderColor:"divider",pb:1},children:[e.jsxs(v,{variant:"h6",component:"h2",sx:{fontWeight:"bold"},children:[a,r&&` (${c}x)`]}),e.jsxs(v,{variant:"subtitle1",color:"text.secondary",children:["Yield: ",t," ",(o==null?void 0:o.name)||"servings"]})]}),e.jsx(Be,{dense:!0,disablePadding:!0,children:s.map((p,y)=>{var x;return e.jsxs(_e.Fragment,{children:[y>0&&e.jsx(oe,{}),e.jsx(Pe,{dense:!0,disableGutters:!0,children:e.jsx(Fe,{primary:e.jsxs(v,{variant:"body2",sx:{fontFamily:"monospace"},children:[e.jsx(m,{component:"span",sx:{display:"inline-block",minWidth:"4rem"},children:p.quantity}),e.jsx(m,{component:"span",sx:{display:"inline-block",minWidth:"4rem"},children:p.unit.abbreviation||p.unit.name}),((x=p.ingredient)==null?void 0:x.name)||""]}),secondary:p.note,secondaryTypographyProps:{variant:"caption",sx:{fontStyle:"italic"}}})})]},p.id)})})]}),ra=["egg","eggs","whole egg","whole eggs","banana","bananas","apple","apples","orange","oranges"],ia=[{decimal:.25,fraction:"1/4"},{decimal:.33,fraction:"1/3"},{decimal:.5,fraction:"1/2"},{decimal:.67,fraction:"2/3"},{decimal:.75,fraction:"3/4"}],la=a=>{const s=a.name.toLowerCase();return ra.some(t=>s.includes(t))||a.unit.type==="COUNT"},ca=a=>{if(a<.125)return a;const s=Math.floor(a),t=a-s;if(t<.125)return s;if(t>.875)return s+1;const o=ia.reduce((r,c)=>Math.abs(c.decimal-t)<Math.abs(r.decimal-t)?c:r);return s+o.decimal},da=(a,s)=>la(a)?Math.round(s):ca(s),ua=(a,s)=>{let t=s.value;if(s.type==="constraint"&&s.constraintIngredientId&&s.constraintQuantity){const o=a.find(r=>r.id===s.constraintIngredientId);o&&(t=s.constraintQuantity/o.quantity)}return a.map(o=>{const r=o.quantity*t,c=da(o,r);return{...o,quantity:c,note:Math.abs(c-r)>.1?`Rounded from ${r.toFixed(2)}`:void 0}})},xa=()=>{const{id:a}=st(),s=nt(),[t,o]=l.useState(null),[r,c]=l.useState(null),[p,y]=l.useState(!0),[x,I]=l.useState(!1),[d,f]=l.useState(null),[u,k]=l.useState(1),[b,j]=l.useState(!1),[h,R]=l.useState(!1),{showSnackbar:n}=ot(),{addTask:M,columns:$}=rt(),[F,U]=l.useState(!1),[ee,D]=l.useState(!1),[B,de]=l.useState(""),[ue,pe]=l.useState("");l.useEffect(()=>{(async()=>{try{if(!a)throw new Error("Recipe ID is required");const g=await ve(parseInt(a,10));o(g)}catch(g){c(g instanceof Error?g.message:"Failed to load recipe")}finally{y(!1)}})()},[a]);const Ee=i=>{if(!(t!=null&&t.recipeIngredients))return;const g=t.recipeIngredients.map(w=>{var C;return{id:w.id,name:((C=w.ingredient)==null?void 0:C.name)||"",quantity:w.quantity,unit:{...w.unit,type:"VOLUME"}}}),_=ua(g,i);f(t.recipeIngredients.map((w,C)=>({...w,quantity:_[C].quantity,note:_[C].note}))),k(i.value)},We=async()=>{var i,g;if(!(!t||!d))try{const _={name:t.name,description:t.description||"",instructions:t.instructions,yieldQuantity:(t.yieldQuantity||1)*u,yieldUnitId:((i=t.yieldUnit)==null?void 0:i.id)||1,prepTimeMinutes:t.prepTimeMinutes||0,cookTimeMinutes:t.cookTimeMinutes||0,categoryId:((g=t.category)==null?void 0:g.id)||1,tags:t.tags,ingredients:d.map(C=>{var E;return{type:"ingredient",ingredientId:(E=C.ingredient)==null?void 0:E.id,quantity:C.quantity,unitId:C.unit.id}})};await ht(t.id,_);const w=await ve(t.id);o(w),f(null),k(1),j(!1)}catch{c("Failed to save scaled version")}},Ve=()=>{f(null),k(1)},Ge=()=>{de(""),pe(""),D(!0)},Le=async()=>{if(!(!t||!B))try{const i=t.id?parseInt(t.id.toString(),10):void 0;await M({title:t.name,description:ue||t.description||"",columnId:B,recipeId:i}),D(!1),n("Recipe added to prep board","success")}catch(i){console.error("Error adding recipe to prep board:",i),n("Failed to add recipe to prep board","error")}},Ae=async()=>{if(t!=null&&t.id)try{await mt(t.id),n("Recipe deleted successfully","success"),s("/recipes")}catch(i){console.error("Error deleting recipe:",i),n("Failed to delete recipe","error")}},xe=({ingredients:i,yield:g,isScaled:_=!1})=>{var w;return e.jsxs(ze,{sx:{p:3,mb:3,height:"100%"},children:[_&&e.jsxs(m,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsxs(v,{variant:"subtitle1",color:"primary",children:["Scaled Version (",u,"x)"]}),e.jsxs(m,{children:[e.jsx(P,{title:"Save as New Base Recipe",children:e.jsx(T,{onClick:()=>j(!0),color:"primary",size:"small",children:e.jsx(Oe,{})})}),e.jsx(P,{title:"Close Scaled Version",children:e.jsx(T,{onClick:Ve,size:"small",children:e.jsx(Ue,{})})})]})]}),(t==null?void 0:t.description)&&!h&&e.jsxs(e.Fragment,{children:[e.jsx(v,{variant:"h6",gutterBottom:!0,children:"Description"}),e.jsx(v,{variant:"body1",paragraph:!0,children:t.description})]}),e.jsx(v,{variant:"h6",gutterBottom:!0,children:"Yield"}),e.jsxs(v,{variant:"body1",paragraph:!0,children:[g," ",((w=t==null?void 0:t.yieldUnit)==null?void 0:w.name)||"servings"]}),e.jsx(v,{variant:"h6",gutterBottom:!0,children:"Ingredients"}),e.jsx(Be,{children:i.map((C,E)=>{var me;return e.jsxs(_e.Fragment,{children:[E>0&&e.jsx(oe,{}),e.jsx(Pe,{children:e.jsx(Fe,{primary:`${C.quantity} ${C.unit.name} ${((me=C.ingredient)==null?void 0:me.name)||""}`,secondary:C.note})})]},C.id)})}),!h&&(t==null?void 0:t.instructions)&&e.jsxs(e.Fragment,{children:[e.jsx(v,{variant:"h6",gutterBottom:!0,sx:{mt:3},children:"Instructions"}),e.jsx("div",{dangerouslySetInnerHTML:{__html:t.instructions}})]})]})};if(p)return e.jsx(ae,{sx:{mt:4,display:"flex",justifyContent:"center"},children:e.jsx(it,{})});if(r||!t||!t.recipeIngredients)return e.jsx(ae,{sx:{mt:4},children:e.jsx(lt,{severity:"error",children:r||"Recipe not found"})});d||t.recipeIngredients.map(i=>({id:i.id,quantity:i.quantity,unit:i.unit,ingredient:i.ingredient}));const he=(t.yieldQuantity||1)*u;return e.jsxs(ae,{maxWidth:"xl",sx:{mt:2},children:[e.jsxs(ct,{"aria-label":"breadcrumb",sx:{mb:2},children:[e.jsx(fe,{component:ge,underline:"hover",color:"inherit",to:"/",children:"KitchenSync"}),e.jsx(fe,{component:ge,underline:"hover",color:"inherit",to:"/recipes",children:"Recipes"}),e.jsx(v,{color:"text.primary",children:t==null?void 0:t.name})]}),e.jsxs(m,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:3},children:[e.jsx(v,{variant:"h4",component:"h1",children:t==null?void 0:t.name}),e.jsxs(m,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e.jsx(P,{title:h?"Show Full Recipe":"Show Concise View",children:e.jsx(Gt,{value:"concise",selected:h,onChange:()=>R(!h),size:"small",children:h?e.jsx(dt,{}):e.jsx(qe,{})})}),e.jsx(P,{title:"Scale Recipe",children:e.jsx(T,{onClick:()=>I(!0),color:"primary",disabled:!!d,children:e.jsx(Ne,{})})}),e.jsx(P,{title:"Add to Prep Board",children:e.jsx(T,{onClick:Ge,color:"secondary",children:e.jsx(ut,{})})}),e.jsx(P,{title:"Edit Recipe",children:e.jsx(T,{onClick:()=>s(`/recipes/${t==null?void 0:t.id}/edit`),color:"primary",children:e.jsx(pt,{})})}),e.jsx(P,{title:"Delete Recipe",children:e.jsx(T,{onClick:()=>U(!0),color:"error",children:e.jsx(xt,{})})})]})]}),e.jsx(m,{sx:{mb:4,borderRadius:2,boxShadow:3,border:"1px solid #ddd",overflow:"hidden"},children:t.photoUrl?e.jsx("img",{src:t.photoUrl.startsWith("http")?t.photoUrl:`${window.location.origin}/${t.photoUrl}`,alt:t.name,style:{width:"100%",maxHeight:"500px",objectFit:"cover",display:"block"},onError:i=>{console.error("Image failed to load:",t.photoUrl);const g=i.target;!g.src.includes("/uploads/")&&t.photoUrl&&(g.src=`${window.location.origin}/uploads/${t.photoUrl.split("/").pop()}`)}}):e.jsx(m,{sx:{height:"300px",width:"100%",bgcolor:"#f5f5f5",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(v,{variant:"body1",color:"text.secondary",children:"No photo available"})})}),e.jsxs(m,{sx:{display:"flex",flexWrap:"wrap",gap:3},children:[e.jsx(m,{sx:{flex:1,minWidth:d?"45%":"100%"},children:h?e.jsx(Re,{name:(t==null?void 0:t.name)||"",ingredients:(t==null?void 0:t.recipeIngredients)||[],yieldQuantity:(t==null?void 0:t.yieldQuantity)||1,yieldUnit:t!=null&&t.yieldUnit?{name:t.yieldUnit.name}:void 0}):e.jsx(xe,{ingredients:(t==null?void 0:t.recipeIngredients)||[],yield:(t==null?void 0:t.yieldQuantity)||1})}),d&&e.jsx(m,{sx:{flex:1,minWidth:"45%"},children:h?e.jsx(Re,{name:(t==null?void 0:t.name)||"",ingredients:d,yieldQuantity:he,yieldUnit:t!=null&&t.yieldUnit?{name:t.yieldUnit.name}:void 0,isScaled:!0,scaleFactor:u}):e.jsx(xe,{ingredients:d,yield:he,isScaled:!0})})]}),e.jsx(oa,{open:x,onClose:()=>I(!1),onScale:Ee,ingredients:t.recipeIngredients.map(i=>{var g;return{id:i.id,name:((g=i.ingredient)==null?void 0:g.name)||"",quantity:i.quantity,unit:{...i.unit,type:"VOLUME"}}})}),e.jsxs(V,{open:ee,onClose:()=>D(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(G,{children:"Add to Prep Board"}),e.jsxs(L,{children:[e.jsxs(ke,{fullWidth:!0,sx:{mt:2,mb:2},children:[e.jsx($e,{id:"prep-column-select-label",children:"Select Column"}),e.jsx(we,{labelId:"prep-column-select-label",value:B,label:"Select Column",onChange:i=>de(i.target.value),children:$.map(i=>e.jsx(Me,{value:i.id,children:i.name},i.id))})]}),e.jsx(A,{fullWidth:!0,multiline:!0,rows:3,label:"Prep Notes",placeholder:"Add notes for this prep task",value:ue,onChange:i=>pe(i.target.value)})]}),e.jsxs(Q,{children:[e.jsx(z,{onClick:()=>D(!1),children:"Cancel"}),e.jsx(z,{onClick:Le,variant:"contained",color:"primary",disabled:!B,children:"Add to Prep Board"})]})]}),e.jsxs(V,{open:b,onClose:()=>j(!1),children:[e.jsx(G,{children:"Save Scaled Version?"}),e.jsx(L,{children:e.jsx(v,{children:"Are you sure you want to replace your base recipe with the scaled version? This action cannot be undone."})}),e.jsxs(Q,{children:[e.jsx(z,{onClick:()=>j(!1),children:"Cancel"}),e.jsx(z,{onClick:We,variant:"contained",color:"primary",children:"Save as Base Recipe"})]})]}),e.jsxs(V,{open:F,onClose:()=>U(!1),children:[e.jsx(G,{children:"Delete Recipe?"}),e.jsx(L,{children:e.jsxs(v,{children:['Are you sure you want to delete "',t==null?void 0:t.name,'"? This action cannot be undone.']})}),e.jsxs(Q,{children:[e.jsx(z,{onClick:()=>U(!1),children:"Cancel"}),e.jsx(z,{onClick:Ae,color:"error",variant:"contained",children:"Delete"})]})]})]})};export{xa as default};
